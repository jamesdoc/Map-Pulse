<html>

<head>
	
	<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
	
</head>

<body>
	
	<center>
	
	<svg width="515" height="515" xmlns="http://www.w3.org/2000/svg" class="blobs">
		<g>
			<circle class="circle" data-x="1" data-y="8" id="p1-8" r="25" cy="040" cx="40" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="1" data-y="7" id="p1-7" r="25" cy="100" cx="40" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="1" data-y="6" id="p1-6" r="25" cy="160" cx="40" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="1" data-y="5" id="p1-5" r="25" cy="220" cx="40" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="1" data-y="4" id="p1-4" r="25" cy="280" cx="40" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="1" data-y="3" id="p1-3" r="25" cy="340" cx="40" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="1" data-y="2" id="p1-2" r="25" cy="400" cx="40" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="1" data-y="1" id="p1-1" r="25" cy="460" cx="40" stroke-width="3" stroke="#000000" fill="#FF0000"/>

			<circle class="circle" data-x="2" data-y="8" id="p2-8" r="25" cy="040" cx="100" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="2" data-y="7" id="p2-7" r="25" cy="100" cx="100" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="2" data-y="6" id="p2-6" r="25" cy="160" cx="100" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="2" data-y="5" id="p2-5" r="25" cy="220" cx="100" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="2" data-y="4" id="p2-4" r="25" cy="280" cx="100" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="2" data-y="3" id="p2-3" r="25" cy="340" cx="100" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="2" data-y="2" id="p2-2" r="25" cy="400" cx="100" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="2" data-y="1" id="p2-1" r="25" cy="460" cx="100" stroke-width="3" stroke="#000000" fill="#FF0000"/>

			<circle class="circle" data-x="3" data-y="8" id="p3-8" r="25" cy="040" cx="160" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="3" data-y="7" id="p3-7" r="25" cy="100" cx="160" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="3" data-y="6" id="p3-6" r="25" cy="160" cx="160" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="3" data-y="5" id="p3-5" r="25" cy="220" cx="160" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="3" data-y="4" id="p3-4" r="25" cy="280" cx="160" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="3" data-y="3" id="p3-3" r="25" cy="340" cx="160" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="3" data-y="2" id="p3-2" r="25" cy="400" cx="160" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="3" data-y="1" id="p3-1" r="25" cy="460" cx="160" stroke-width="3" stroke="#000000" fill="#FF0000"/>

			<circle class="circle" data-x="4" data-y="8" id="p4-8" r="25" cy="040" cx="220" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="4" data-y="7" id="p4-7" r="25" cy="100" cx="220" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="4" data-y="6" id="p4-6" r="25" cy="160" cx="220" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="4" data-y="5" id="p4-5" r="25" cy="220" cx="220" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="4" data-y="4" id="p4-4" r="25" cy="280" cx="220" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="4" data-y="3" id="p4-3" r="25" cy="340" cx="220" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="4" data-y="2" id="p4-2" r="25" cy="400" cx="220" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="4" data-y="1" id="p4-1" r="25" cy="460" cx="220" stroke-width="3" stroke="#000000" fill="#FF0000"/>

			<circle class="circle" data-x="5" data-y="8" id="p5-8" r="25" cy="040" cx="280" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="5" data-y="7" id="p5-7" r="25" cy="100" cx="280" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="5" data-y="6" id="p5-6" r="25" cy="160" cx="280" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="5" data-y="5" id="p5-5" r="25" cy="220" cx="280" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="5" data-y="4" id="p5-4" r="25" cy="280" cx="280" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="5" data-y="3" id="p5-3" r="25" cy="340" cx="280" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="5" data-y="2" id="p5-2" r="25" cy="400" cx="280" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="5" data-y="1" id="p5-1" r="25" cy="460" cx="280" stroke-width="3" stroke="#000000" fill="#FF0000"/>

			<circle class="circle" data-x="6" data-y="8" id="p6-8" r="25" cy="040" cx="340" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="6" data-y="7" id="p6-7" r="25" cy="100" cx="340" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="6" data-y="6" id="p6-6" r="25" cy="160" cx="340" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="6" data-y="5" id="p6-5" r="25" cy="220" cx="340" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="6" data-y="4" id="p6-4" r="25" cy="280" cx="340" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="6" data-y="3" id="p6-3" r="25" cy="340" cx="340" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="6" data-y="2" id="p6-2" r="25" cy="400" cx="340" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="6" data-y="1" id="p6-1" r="25" cy="460" cx="340" stroke-width="3" stroke="#000000" fill="#FF0000"/>

			<circle class="circle" data-x="7" data-y="8" id="p7-8" r="25" cy="040" cx="400" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="7" data-y="7" id="p7-7" r="25" cy="100" cx="400" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="7" data-y="6" id="p7-6" r="25" cy="160" cx="400" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="7" data-y="5" id="p7-5" r="25" cy="220" cx="400" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="7" data-y="4" id="p7-4" r="25" cy="280" cx="400" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="7" data-y="3" id="p7-3" r="25" cy="340" cx="400" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="7" data-y="2" id="p7-2" r="25" cy="400" cx="400" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="7" data-y="1" id="p7-1" r="25" cy="460" cx="400" stroke-width="3" stroke="#000000" fill="#FF0000"/>

			<circle class="circle" data-x="8" data-y="8" id="p8-8" r="25" cy="040" cx="460" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="8" data-y="7" id="p8-7" r="25" cy="100" cx="460" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="8" data-y="6" id="p8-6" r="25" cy="160" cx="460" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="8" data-y="5" id="p8-5" r="25" cy="220" cx="460" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="8" data-y="4" id="p8-4" r="25" cy="280" cx="460" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="8" data-y="3" id="p8-3" r="25" cy="340" cx="460" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="8" data-y="2" id="p8-2" r="25" cy="400" cx="460" stroke-width="3" stroke="#000000" fill="#FF0000"/>
			<circle class="circle" data-x="8" data-y="1" id="p8-1" r="25" cy="460" cx="460" stroke-width="3" stroke="#000000" fill="#FF0000"/>
		</g>
	</svg>
	
</center>

<script>
	d3.selection.prototype.moveToFront = function() {
	  return this.each(function(){
		this.parentNode.appendChild(this);
	  });
	};
	
	(function() {
		var svg = d3.select(".blobs");
		
		var circle = svg.selectAll(".circle");
    	
    	circle.on("mouseover", function(){d3.select(this).style("fill", "pink");})
    		.on("mouseout", function(){d3.select(this).style("fill", "red");})
			.on("click", getPoint);
	})();
	
	
	function getPoint()
	{
		var point = d3.select(this);
		var pointId = point.attr('id').substring(1);
		
		var x = point.attr('data-x');
		var y = point.attr('data-y');
		
		loop(x, y, 3);
	}
	
	function loop(x, y, r)
	{
		//console.log(x + ',' + y);
		
		i = 1;
		
		tl2bl(parseInt(x)+i, parseInt(y)+i, 2*i);
		
		b = 1;
		(function myLoop (i) {          
			setTimeout(function () {   
			  	
			  	pulse(parseInt(x)+b, parseInt(y)+b);
			
				//square[i] = {"x" : parseInt(x)+i, "y" : parseInt(y)+i}; 
				
				tl2bl(parseInt(x)+b, parseInt(y)+b, 2*b); 
				
				b++;
				      
			  if (--i) myLoop(i);      //  decrement i and call myLoop again if i > 0
			}, 150)
		})(r);                        //  pass the number of iterations as an argument
		
		
		
		
		
		//console.log(square);
	}

	function tl2bl(x,y,count)
	{
		pulse(x, y);
		
		a = 1;
		
		while(a <= count)
		{
			x=x;
			y=y-1;
			
			pulse(x, y);
			a++;
		}
		
		bl2br(x,y,count)
	}
	
	function bl2br(x,y,count)
	{
		a = 1;
		while(a <= count)
		{
			x=x-1;
			y=y;
			
			pulse(x, y);
			a++;
		}
		
		br2tl(x,y,count);
		
	}
	
	function br2tl(x,y,count)
	{
		a = 1;
		while(a <= count)
		{
			x=x;
			y=y+1;
			
			pulse(x, y);
			a++;
		}
		
		tl2tr(x,y,count);
	}
	
	function tl2tr(x,y,count)
	{
		count = count-1;
		a = 1;
		while(a <= count)
		{
			x=x+1;
			y=y;
			
			pulse(x, y);
			a++;
		}
	}
	
	/*
	function animateFirstStep()
	{
		var point = d3.select(this);
		
		var pointId = point.attr('id').substring(1);
				
		var index = pointId.indexOf('-');
		
		var x = pointId.substring(0, index);
		var y = pointId.substring(index+1);
		
		console.log(x + '-' + y);
		
		pulse(x,y);
		
		i = 1;
		(function myLoop (i) {          
			setTimeout(function () {   
			  	pulse(parseInt(x), parseInt(y)+i);
				pulse(parseInt(x), parseInt(y)-i);
				pulse(parseInt(x)-i, parseInt(y));
				pulse(parseInt(x)+i, parseInt(y));             
			  if (--i) myLoop(i);      //  decrement i and call myLoop again if i > 0
			}, 100)
		})(2);                        //  pass the number of iterations as an argument
		
		
		
		
	}
	*/
	function pulse(x, y)
	{
		
		point = d3.select("#p" + x + '-' + y);
		
		point
		  .transition()           
			.delay(0)            
			.duration(500)
			.attr("r", 15)
			.each("end", animateSecondStep);
	}
	
	function animateSecondStep() {
	
		var point = d3.select(this);
		
		point.moveToFront()
		  .transition()           
			.delay(0)            
			.duration(250)
			.attr("r", 25);
	}
	
	
	
	
	/*
	function animateSecondStep() {
		
		d3.select(this)
			.transition()
				.duration(500)
				.attr("r", 10)
				.each("end", animateThirdStep);
	}
	
	function animateThirdStep() {
		
		d3.select(this)
			.transition()
        .duration(250)
        .attr("r", 25);
	}
	*/
</script>

</body>

</html>